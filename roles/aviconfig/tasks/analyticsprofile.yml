# Automatically Generated File
# Copyright 2021 VMware, Inc. All rights reserved. VMware Confidential
---
- name: Avi AnalyticsProfile | Create or Update AnalyticsProfile
  no_log: "{{ avi_role_config_log_mode | default(False) }}"
  vmware.alb.avi_analyticsprofile:
    controller: "{{ avi_controller | default(omit) }}"
    username: "{{ avi_username | default(omit) }}"
    password: "{{ avi_password | default(omit) }}"
    tenant: "{{ item.tenant | default(omit) }}"
    state: "{{ avi_role_state_mode }}"
    api_version: "{{ api_version | default(omit) }}"
    avi_credentials: "{{ avi_credentials | default(omit) }}"
    api_context: "{{ avi_api_context | default(omit) }}"
    avi_api_update_method: "{{ item.avi_api_update_method | default(omit) }}"
    avi_api_patch_op: "{{ item.avi_api_patch_op | default(omit) }}"
    apdex_response_threshold: "{{ item.apdex_response_threshold | default(omit) }}"
    apdex_response_tolerated_factor: "{{ item.apdex_response_tolerated_factor | default(omit) }}"
    apdex_rtt_threshold: "{{ item.apdex_rtt_threshold | default(omit) }}"
    apdex_rtt_tolerated_factor: "{{ item.apdex_rtt_tolerated_factor | default(omit) }}"
    apdex_rum_threshold: "{{ item.apdex_rum_threshold | default(omit) }}"
    apdex_rum_tolerated_factor: "{{ item.apdex_rum_tolerated_factor | default(omit) }}"
    apdex_server_response_threshold: "{{ item.apdex_server_response_threshold | default(omit) }}"
    apdex_server_response_tolerated_factor: "{{ item.apdex_server_response_tolerated_factor | default(omit) }}"
    apdex_server_rtt_threshold: "{{ item.apdex_server_rtt_threshold | default(omit) }}"
    apdex_server_rtt_tolerated_factor: "{{ item.apdex_server_rtt_tolerated_factor | default(omit) }}"
    client_log_config: "{{ item.client_log_config | default(omit) }}"
    client_log_streaming_config: "{{ item.client_log_streaming_config | default(omit) }}"
    configpb_attributes: "{{ item.configpb_attributes | default(omit) }}"
    conn_lossy_ooo_threshold: "{{ item.conn_lossy_ooo_threshold | default(omit) }}"
    conn_lossy_timeo_rexmt_threshold: "{{ item.conn_lossy_timeo_rexmt_threshold | default(omit) }}"
    conn_lossy_total_rexmt_threshold: "{{ item.conn_lossy_total_rexmt_threshold | default(omit) }}"
    conn_lossy_zero_win_size_event_threshold: "{{ item.conn_lossy_zero_win_size_event_threshold | default(omit) }}"
    conn_server_lossy_ooo_threshold: "{{ item.conn_server_lossy_ooo_threshold | default(omit) }}"
    conn_server_lossy_timeo_rexmt_threshold: "{{ item.conn_server_lossy_timeo_rexmt_threshold | default(omit) }}"
    conn_server_lossy_total_rexmt_threshold: "{{ item.conn_server_lossy_total_rexmt_threshold | default(omit) }}"
    conn_server_lossy_zero_win_size_event_threshold: "{{ item.conn_server_lossy_zero_win_size_event_threshold | default(omit) }}"
    description: "{{ item.description | default(omit) }}"
    enable_adaptive_config: "{{ item.enable_adaptive_config | default(omit) }}"
    enable_advanced_analytics: "{{ item.enable_advanced_analytics | default(omit) }}"
    enable_ondemand_metrics: "{{ item.enable_ondemand_metrics | default(omit) }}"
    enable_se_analytics: "{{ item.enable_se_analytics | default(omit) }}"
    enable_server_analytics: "{{ item.enable_server_analytics | default(omit) }}"
    enable_vs_analytics: "{{ item.enable_vs_analytics | default(omit) }}"
    exclude_client_close_before_request_as_error: "{{ item.exclude_client_close_before_request_as_error | default(omit) }}"
    exclude_dns_policy_drop_as_significant: "{{ item.exclude_dns_policy_drop_as_significant | default(omit) }}"
    exclude_gs_down_as_error: "{{ item.exclude_gs_down_as_error | default(omit) }}"
    exclude_http_error_codes: "{{ item.exclude_http_error_codes | default(omit) }}"
    exclude_invalid_dns_domain_as_error: "{{ item.exclude_invalid_dns_domain_as_error | default(omit) }}"
    exclude_invalid_dns_query_as_error: "{{ item.exclude_invalid_dns_query_as_error | default(omit) }}"
    exclude_issuer_revoked_ocsp_responses_as_error: "{{ item.exclude_issuer_revoked_ocsp_responses_as_error | default(omit) }}"
    exclude_no_dns_record_as_error: "{{ item.exclude_no_dns_record_as_error | default(omit) }}"
    exclude_no_valid_gs_member_as_error: "{{ item.exclude_no_valid_gs_member_as_error | default(omit) }}"
    exclude_persistence_change_as_error: "{{ item.exclude_persistence_change_as_error | default(omit) }}"
    exclude_revoked_ocsp_responses_as_error: "{{ item.exclude_revoked_ocsp_responses_as_error | default(omit) }}"
    exclude_server_dns_error_as_error: "{{ item.exclude_server_dns_error_as_error | default(omit) }}"
    exclude_server_tcp_reset_as_error: "{{ item.exclude_server_tcp_reset_as_error | default(omit) }}"
    exclude_sip_error_codes: "{{ item.exclude_sip_error_codes | default(omit) }}"
    exclude_stale_ocsp_responses_as_error: "{{ item.exclude_stale_ocsp_responses_as_error | default(omit) }}"
    exclude_syn_retransmit_as_error: "{{ item.exclude_syn_retransmit_as_error | default(omit) }}"
    exclude_tcp_reset_as_error: "{{ item.exclude_tcp_reset_as_error | default(omit) }}"
    exclude_unavailable_ocsp_responses_as_error: "{{ item.exclude_unavailable_ocsp_responses_as_error | default(omit) }}"
    exclude_unsupported_dns_query_as_error: "{{ item.exclude_unsupported_dns_query_as_error | default(omit) }}"
    healthscore_max_server_limit: "{{ item.healthscore_max_server_limit | default(omit) }}"
    hs_event_throttle_window: "{{ item.hs_event_throttle_window | default(omit) }}"
    hs_max_anomaly_penalty: "{{ item.hs_max_anomaly_penalty | default(omit) }}"
    hs_max_resources_penalty: "{{ item.hs_max_resources_penalty | default(omit) }}"
    hs_max_security_penalty: "{{ item.hs_max_security_penalty | default(omit) }}"
    hs_min_dos_rate: "{{ item.hs_min_dos_rate | default(omit) }}"
    hs_performance_boost: "{{ item.hs_performance_boost | default(omit) }}"
    hs_pscore_traffic_threshold_l4_client: "{{ item.hs_pscore_traffic_threshold_l4_client | default(omit) }}"
    hs_pscore_traffic_threshold_l4_server: "{{ item.hs_pscore_traffic_threshold_l4_server | default(omit) }}"
    hs_security_certscore_expired: "{{ item.hs_security_certscore_expired | default(omit) }}"
    hs_security_certscore_gt30d: "{{ item.hs_security_certscore_gt30d | default(omit) }}"
    hs_security_certscore_le07d: "{{ item.hs_security_certscore_le07d | default(omit) }}"
    hs_security_certscore_le30d: "{{ item.hs_security_certscore_le30d | default(omit) }}"
    hs_security_chain_invalidity_penalty: "{{ item.hs_security_chain_invalidity_penalty | default(omit) }}"
    hs_security_cipherscore_eq000b: "{{ item.hs_security_cipherscore_eq000b | default(omit) }}"
    hs_security_cipherscore_ge128b: "{{ item.hs_security_cipherscore_ge128b | default(omit) }}"
    hs_security_cipherscore_lt128b: "{{ item.hs_security_cipherscore_lt128b | default(omit) }}"
    hs_security_encalgo_score_none: "{{ item.hs_security_encalgo_score_none | default(omit) }}"
    hs_security_encalgo_score_rc4: "{{ item.hs_security_encalgo_score_rc4 | default(omit) }}"
    hs_security_hsts_penalty: "{{ item.hs_security_hsts_penalty | default(omit) }}"
    hs_security_nonpfs_penalty: "{{ item.hs_security_nonpfs_penalty | default(omit) }}"
    hs_security_ocsp_revoked_score: "{{ item.hs_security_ocsp_revoked_score | default(omit) }}"
    hs_security_selfsignedcert_penalty: "{{ item.hs_security_selfsignedcert_penalty | default(omit) }}"
    hs_security_ssl30_score: "{{ item.hs_security_ssl30_score | default(omit) }}"
    hs_security_tls10_score: "{{ item.hs_security_tls10_score | default(omit) }}"
    hs_security_tls11_score: "{{ item.hs_security_tls11_score | default(omit) }}"
    hs_security_tls12_score: "{{ item.hs_security_tls12_score | default(omit) }}"
    hs_security_tls13_score: "{{ item.hs_security_tls13_score | default(omit) }}"
    hs_security_weak_signature_algo_penalty: "{{ item.hs_security_weak_signature_algo_penalty | default(omit) }}"
    latency_audit_props: "{{ item.latency_audit_props | default(omit) }}"
    markers: "{{ item.markers | default(omit) }}"
    name: "{{ item.name | default(omit) }}"
    ondemand_metrics_idle_timeout: "{{ item.ondemand_metrics_idle_timeout | default(omit) }}"
    ranges: "{{ item.ranges | default(omit) }}"
    resp_code_block: "{{ item.resp_code_block | default(omit) }}"
    sensitive_log_profile: "{{ item.sensitive_log_profile | default(omit) }}"
    sip_log_depth: "{{ item.sip_log_depth | default(omit) }}"
    tenant_ref: "{{ item.tenant_ref | default(omit) }}"
    time_tracker_props: "{{ item.time_tracker_props | default(omit) }}"
    uuid: "{{ item.uuid | default(omit) }}"
  when:
    - (avi_role_state_mode == "present" and avi_config_state == "present")
    - (item.state | default("present") == avi_role_state_mode or avi_config_state == "absent")
  with_items: "{{ avi_role_cfg.analyticsprofile | default([]) }}"
